# 2. R 기본 문법

## (1) 연산자

### ① 대입 연산자

```
string1 <- 'abc'

"data" -> string2

number1 <<- 15

Inf ->> number2

logical = NA
```

### ② 비교 연산자

```
string1 == 'abc'

string1 != 'abcd'

string2 > 'DATA'

number1 <= 15

is.na(logical)

is.null(NULL)
```

### ④ 기타 연산자

```
!TRUE

TRUE&TRUE

TRUE&FALSE

!(TRUE&FALSE)

TRUE | FALSE
```

## (2) R 데이터 구조

### ① 벡터

```
v4 <- c( 3 , TRUE , FALSE)
v4

v5 <- c( 'a' , 1 , TRUE )
v5

v1 <- c( 1 : 6 )
v1
```

### ② 행렬

```
m1 <- matrix( c( 1 : 6 ) , nrow = 2 )
m1

m2 <- matrix( c( 1 : 6 ) , ncol = 2 )
m2

m3 <- matrix( c( 1 : 6 ) , nrow = 2 , byrow = T )
m3

v1 <- c( 1 : 6 )
v1

dim(v1) <- c( 2 , 3 )
v1
```

### ③ 배열

```
a1 <- array( c( 1 : 12 ) , dim = c( 2 , 3 , 2 ) )
a1

a2 <- c( 1 : 12 )

dim(a2) <- c( 2 , 3 , 2 )
```

### ④ 리스트

```
L <- list()
L[[1]] <- 5
L[[2]] <- c( 1 : 6 )
L[[3]] <- matrix( c( 1 : 6 ) , nrow=2 )
L[[4]] <- array( c( 1 : 12 ) , dim=c( 2 , 3 , 2 ) )
L
```

## (3) R 내장 함수

### ① 기본 함수

```
help(paste) # 명령어 입력 후 우측 하단 도움말에 결과가 출력된다.
?paste
paste( 'This is' , 'a pen' )

seq( 1 , 10 , by=2 )

rep( 1 , 5 )

a <- 1
a

rm( a )
a

ls()

print(10)
```

### ② 통계 함수

```
v1 <- c( 1 : 9 )
sum( v1 )

mean( v1 )

median( v1 )

var( v1 )

sd( v1 )

max( v1 )

min( v1 )

range( v1 )

summary( v1 )

# 첨도와 왜도 값 계산 함수를 사용하려면 별도의 패키지가 필요하다.
install.packages("fBasics")
library( fBasics )
skewness(v1)

kurtosis(v1)

attr(,"method")
```

## (4) R 데이터 핸들링

### ① 데이터 이름 변경

```
m1 <- matrix( c( 1 : 6 ) , nrow = 2 )
colnames( m1 ) <- c( 'c1' , 'c2' , 'c3' )
rownames( m1 ) <- c( 'r1' , 'r2' )
m1

colnames( m1 )

rownames( m1 )

df1 <- data.frame( x = c( 1 , 2 , 3 ) , y = c ( 4 , 5 , 6 ) )
colnames( df1 ) <- c( 'c1' , 'c2' )
rownames( df1 ) <- c( 'r1' , 'r2' , 'r3' )
df1

colnames( df1 )

rownames( df1 )
```

### ② 데이터 추출 

```
v1 <- c( 3 , 6 , 9 , 12 )
v1[ 2 ]

m1 <- matrix( c( 1 : 6 ) , nrow = 3 )
m1[ 2 , 2 ]

colnames( m1 ) <- c( 'c1' , 'c2' )
m1[ , 'c1' ]

rownames( m1 ) <- c( 'r1' , 'r2' , 'r3' )
m1[ 'r3' , 'c2' ]

v1 <- c( 1 : 6 )
v2 <- c( 7 : 12 )
df1 <- data.frame( v1 , v2 )
df1$v1

df1$v2[3]
```

### ③ 데이터 결합

```
v1 <- c( 1 , 2 , 3 )
v2 <- c( 4 , 5 , 6 )
rbind( v1 , v2 )

cbind( v1 , v2 )

v1 <- c( 1 , 2 , 3 )
v2 <- c( 4 , 5 , 6 , 7 , 8 )
rbind( v1 , v2 )
```

## (5) 제어문

### ① 반복문 

```
for ( i in 1:3 ){
  print( i )
}

data <- c( "a" , "b" , "c" )
for ( i in data ){
  print( i )
}

i <- 0
while( i < 5 ){
  print( i )
  i <- i + 1
}
```

### ② 조건문

```
number <- 5
if ( number < 5 ) {
  print( 'number는 5보다 작다.' )
} else if ( number > 5 ) {
  print( 'number는 5보다 크다.' )
} else {
  print( 'number는 5와 같다.' )
}

number <- 3
if ( number < 5 ) {
  print( 'number는 5보다 작다.' )
} else if ( number > 5 ) {
  print( 'number는 5보다 크다.' )
} else {
  print( 'number는 5와 같다.' )
}

number <- 7
if ( number < 5 ) {
  print( 'number는 5보다 작다.' )
} else if ( number > 5 ) {
  print( 'number는 5보다 크다.' )
} else {
  print( 'number는 5와 같다.' )
}
```

### ③ 사용자 정의 함수

```
comparedTo5 <- function( number ) {
  if ( number < 5 ) {
    print( 'number는 5보다 작다.' )
  } else if ( number > 5 ) {
    print( 'number는 5보다 크다.' )
  } else {
    print( 'number는 5와 같다.' )
  }
}

comparedTo5( 10 )

comparedTo5( 3 )

comparedTo5( 5 )
```

### ④ 주석

```
# 1+1을 계산하는 방법
1 + 1
```

## (6) 통계분석에 자주 사용되는 R 함수

### ② 문자 연산

```
# 문자열 데이터 생성
data <- 'This is a pen'
tolower( data )

toupper( data )

nchar( data )

substr( data , 9 , 13 )

strsplit( data , 'is' )

grepl( 'pen' , data )

gsub( 'pen' , 'banana' , data )
```

### ⑤ 데이터 탐색

```
# 벡터 생성
x <- c( 1 : 12 )

# 기본값은 6이지만 원하는 개수만큼 데이터를 탐색한다.
head( x , 5 )

tail( x , 5 )

quantile( x )
```

### ⑥ 데이터 전처리

```
# 임의의 데이터프레임 생성
df1 <- data.frame( x = c( 1 , 1 , 1 , 2 , 2 ) , y = c( 2 , 3 , 4 , 3 , 3 ) )
df2 <- data.frame( x = c( 1 , 2 , 3 , 4 ) , z = c( 5 , 6 , 7 , 8 ) )
subset( df1 , x == 1 )
merge( df1 , df2 , by = c( 'x' ) )

# 1은 각 행에 함수를 적용, 2는 각 열에 함수를 적용
apply( df1, 1, sum )

apply( df1, 2, sum )
```

### ⑨ 날짜

```
Sys.Date()

Sys.time()

as.Date( "2020-01-01" )

# %Y는 연도 네 자리, %y는 연도 두 자리, %m은 월, %d는 일, %A는 요일 등
format( Sys.Date() , '%Y/%m/%d' )

format( Sys.Date() , '%A' )

# 시간 데이터를 unclass하면 타임스탬프를 얻을 수 있다.
unclass( Sys.time() )

as.POSIXct( 1577804401 , origin = '1970-01-01' )
```

### ⑩ 산점도

```
# 데이터 생성
x <- c( 1 : 10 )
y <- rnorm( 10 )

# 파라미터 type에서 p는 점, l은 직선, b는 점과 직선, n은 아무것도 표시하지 않음을 의미
# xlim로 x축의 범위, ylim로 y축의 범위를 설정할 수 있다.
# xlab, ylab으로 각 축의 이름을 지정할 수 있다.
# main으로 산점도의 이름을 정할 수 있다.
plot( x , y , type = 'l' , xlim = c( -2 , 12 ) , ylim = c( -3 , 3 ) , xlab = 'X axis' , ylab = 'Y axis' , main = 'Test plot' )

# abline의 v는 수직선, h는 수평선을 그리는 매개변수다.
# col 매개변수로 색상을 선택할 수 있다.
abline( v = c( 1 , 10 ) , col = 'blue' )
```
